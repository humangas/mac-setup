---
# mattn/memo
- name: Install mattn/memo
  shell: go get github.com/mattn/memo
  environment: 
    GOPATH: "{{ lookup('env', 'HOME') }}"

- name: Create memo directory
  file:
    path: ~/.config/memo/_posts 
    state: directory
    force: yes

- name: Setup config.toml 
  copy:
    src: .config/memo/config.toml 
    dest: ~/.config/memo/
    mode: 0644
    force: yes

- name: Install zsh completion
  get_url:
    url: https://raw.githubusercontent.com/mattn/memo/master/misc/completion.zsh
    dest: ~/.zsh.d/memo_completion.sh 
    mode: 0644 

# vim: memolist
- name: Create userautoload directory
  file:
    path: ~/.vim/userautoload
    state: directory
    force: yes

- name: Setup memolist.vim 
  copy:
    src: .vim/userautoload/memolist.vim
    dest: ~/.vim/userautoload/
    mode: 0644
    force: yes

# Dropbox
- name: Install Dropbox 
  homebrew_cask:
    name: dropbox
    state: present 

- name: Create Dropbox dir 
  file:
    path: ~/Dropbox
    state: directory 
    force: yes

- name: Setup Dropbox Symbolic link 
  file:
    src: ~/.config/memo/_posts
    dest: ~/Dropbox/memo 
    state: link

# git
- name: Setup git repository 
  git:
    repo: git@github.com:humangas/memo.git
    dest: ~/.config/memo/_posts
    clone: no
    update: no
